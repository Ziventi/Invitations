<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />

    <title>Service | Ziventi</title>
  </head>

  <body style="background-color: black; color: white">
    <table>
      <thead>
        <th>Name</th>
        <th>Status</th>
      </thead>
      <tbody>
        <tr>
          <td>Abidemi Ajayi</td>
          <td>
            <button onclick="sendHash(this);" value="Confirmed">
              Confirmed
            </button>
          </td>
          <td>
            <button onclick="sendHash(this);" value="Tentative">
              Tentative
            </button>
          </td>
          <td>
            <button onclick="sendHash(this);" value="Unavailable">
              Unavailable
            </button>
          </td>
          <td>
            <button onclick="sendHash(this);" value="Awaiting">Awaiting</button>
          </td>
        </tr>
      </tbody>
    </table>
  </body>

  <script type="text/javascript">
    async function sendHash(e) {
      const sheetTitle = '';

      const params = {
        guestName: 'Abidemi Ajayi',
        status: 'Confirmed',
        sheetTitle: 'Guest List',
        spreadsheetId: null
      };

      const res = await fetch(`/api/raw`, {
        method: 'POST',
        body: {
          json: JSON.stringify(params)
        }
      });
      console.log(res);
      if (res.status === 200) {
        alert('Successful.');
      } else {
        alert('Problem.');
      }
    }
  </script>
</html>
